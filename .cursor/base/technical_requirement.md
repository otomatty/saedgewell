# 技術要件とアーキテクチャ設計テンプレート

## 1. 技術要件セクション

### 1.1 技術スタック概要

#### フロントエンド
| 技術 | バージョン | 選定理由 | 制約事項 |
|------|------------|----------|-----------|
| Next.js | 15.x | - App Routerによる最新のルーティング<br>- サーバーコンポーネントによるパフォーマンス最適化<br>- TypeScriptの完全サポート<br>- Server Actionsによる効率的なデータ操作 | - Node.js 18.17以上が必要 |
| TypeScript | 5.x | - 型安全性の確保<br>- IDEサポートの向上<br>- コードの保守性向上 | - チーム全体のTypeScript習熟が必要 |
| Tailwind CSS | 4.x | - 高い開発効率<br>- パフォーマンスの最適化<br>- カスタマイズ性 | - クラス名の長さ |
| shadcn/ui | 最新 | - アクセシビリティ対応<br>- カスタマイズ可能なコンポーネント<br>- Tailwind CSSとの相性 | - コンポーネントのバンドルサイズ |

#### バックエンド
| 技術 | バージョン | 選定理由 | 制約事項 |
|------|------------|----------|-----------|
| Supabase | 最新 | - リアルタイムデータ同期<br>- 認証機能の組み込み<br>- PostgreSQLの直接利用 | - 無料プランの制限 |
| Bun | 1.x | - 高速な実行環境<br>- NPMパッケージの互換性<br>- ビルトインツール | - 一部NPMパッケージとの互換性 |

### 1.2 データ処理戦略

#### Server Actions優先方針
1. フォーム送信やデータ更新には優先的にServer Actionsを使用
2. サーバーサイドでの状態管理とキャッシュの活用
3. 最適化されたクライアントサイドの再検証

```typescript
// データ更新の実装例
interface UpdatePattern {
  // 更新に必要なパラメータ
  // バリデーションルール
  // 戻り値の型定義
}
```

#### データアクセスパターン
1. データ取得パターン
   - キャッシュ戦略
   - 最適化方針
   - エラー処理

```typescript
// データ取得の実装例
interface FetchPattern {
  // 取得パラメータ
  // フィルタリング条件
  // レスポンス型
}
```

## 2. アーキテクチャセクション

### 2.1 システム構成図

```mermaid
graph TD
    A[クライアント層] --> B[アプリケーション層]
    B --> C[データ層]
    B --> D[外部サービス層]
    注: 実際のシステム構成に応じて修正
```

### 2.2 データモデル

#### 主要エンティティ
```typescript
interface Entity {
  // プライマリーキー
  // 必須フィールド
  // リレーション
  // メタデータ
}
```

#### リレーションシップ
- エンティティ間の関係性
- 制約条件
- インデックス設計

### 2.3 API設計

#### エンドポイント設計パターン
```typescript
// RESTful API例
interface APIEndpoints {
  // HTTPメソッド
  // パスパラメータ
  // クエリパラメータ
  // リクエストボディ
  // レスポンス型
}
```

### 2.4 セキュリティ設計

#### 認証・認可
- 認証方式
- 権限管理
- セッション管理

#### データ保護
- 暗号化方式
- アクセス制御
- 監査ログ

### 2.5 パフォーマンス最適化

#### キャッシュ戦略
- キャッシュレイヤー
- 無効化ポリシー
- 更新戦略

#### スケーリング方針
- 水平スケーリング
- 垂直スケーリング
- 負荷分散

### 2.6 監視・運用

#### モニタリング
- メトリクス定義
- アラート条件
- ログ収集

#### バックアップ・リカバリ
- バックアップ方式
- リカバリ手順
- データ保持期間
